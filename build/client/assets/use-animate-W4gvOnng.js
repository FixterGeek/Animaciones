import{a as ee,m as te,b as ne,d as ae,r as re,e as se,g as ie,i as Q,h as oe,j as ue,k as le,p as ce,l as fe,V as me,n as pe,o as de,S as ge,H as ye,v as N,q as he,t as Se,w as ve,G as Ee,u as _}from"./SVGVisualElement-CV7yoBz5.js";import{r as Ae}from"./chunk-D52XG6IA-Bgsi9VY-.js";function Ve(e){return Ae.useEffect(()=>()=>e(),[])}function be(e,t=100,n){const a=n({...e,keyframes:[0,t]}),r=Math.min(ee(a),te);return{type:"keyframes",ease:i=>a.next(r*i).value/t,duration:ne(r)}}const De=(e,t,n)=>{const a=t-e;return((n-e)%a+a)%a+e};function X(e,t){return ae(e)?e[De(0,e.length,t)]:e}function B(e){return typeof e=="object"&&!Array.isArray(e)}function Y(e,t,n,a){return typeof e=="string"&&B(t)?re(e,n,a):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function Me(e,t,n){return e*(t+1)}function U(e,t,n,a){var r;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:(r=a.get(t))!==null&&r!==void 0?r:e}function xe(e,t,n){for(let a=0;a<e.length;a++){const r=e[a];r.at>t&&r.at<n&&(ie(e,r),a--)}}function Te(e,t,n,a,r,i){xe(e,r,i);for(let s=0;s<t.length;s++)e.push({value:t[s],at:se(r,i,a[s]),easing:X(n,s)})}function Oe(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function we(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Ge="easeInOut";function Ie(e,{defaultTransition:t={},...n}={},a,r){const i=t.duration||.3,s=new Map,m=new Map,A={},V=new Map;let M=0,u=0,I=0;for(let b=0;b<e.length;b++){const p=e[b];if(typeof p=="string"){V.set(p,u);continue}else if(!Array.isArray(p)){V.set(p.name,U(u,p.at,M,V));continue}let[E,d,l={}]=p;l.at!==void 0&&(u=U(u,l.at,M,V));let c=0;const D=(g,y,S,x=0,T=0)=>{const o=Ke(g),{delay:C=0,times:h=oe(o),type:L="keyframes",repeat:K,repeatType:We,repeatDelay:_e=0,...$}=y;let{ease:v=t.ease||"easeOut",duration:f}=y;const P=typeof C=="function"?C(x,T):C,k=o.length,z=ue(L)?L:r==null?void 0:r[L];if(k<=2&&z){let O=100;if(k===2&&Ne(o)){const w=o[1]-o[0];O=Math.abs(w)}const j={...$};f!==void 0&&(j.duration=fe(f));const F=be(j,O,z);v=F.ease,f=F.duration}f??(f=i);const H=u+P;h.length===1&&h[0]===0&&(h[1]=1);const R=h.length-o.length;if(R>0&&le(h,R),o.length===1&&o.unshift(null),K){f=Me(f,K);const O=[...o],j=[...h];v=Array.isArray(v)?[...v]:[v];const F=[...v];for(let w=0;w<K;w++){o.push(...O);for(let G=0;G<O.length;G++)h.push(j[G]+(w+1)),v.push(G===0?"linear":X(F,G-1))}Oe(h,K)}const W=H+f;Te(S,o,v,h,H,W),c=Math.max(P+f,c),I=Math.max(W,I)};if(Q(E)){const g=q(E,m);D(d,l,J("default",g))}else{const g=Y(E,d,a,A),y=g.length;for(let S=0;S<y;S++){d=d,l=l;const x=g[S],T=q(x,m);for(const o in d)D(d[o],je(l,o),J(o,T),S,y)}}M=u,u+=c}return m.forEach((b,p)=>{for(const E in b){const d=b[E];d.sort(we);const l=[],c=[],D=[];for(let y=0;y<d.length;y++){const{at:S,value:x,easing:T}=d[y];l.push(x),c.push(ce(0,I,S)),D.push(T||"easeOut")}c[0]!==0&&(c.unshift(0),l.unshift(l[0]),D.unshift(Ge)),c[c.length-1]!==1&&(c.push(1),l.push(null)),s.has(p)||s.set(p,{keyframes:{},transition:{}});const g=s.get(p);g.keyframes[E]=l,g.transition[E]={...t,duration:I,ease:D,times:c,...n}}}),s}function q(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function J(e,t){return t[e]||(t[e]=[]),t[e]}function Ke(e){return Array.isArray(e)?e:[e]}function je(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const Fe=e=>typeof e=="number",Ne=e=>e.every(Fe);function Ce(e,t){return e in t}class Le extends me{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(Ce(n,t)){const a=t[n];if(typeof a=="string"||typeof a=="number")return a}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return pe()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function Be(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=de(e)?new ge(t):new ye(t);n.mount(e),N.set(e,n)}function Pe(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Le(t);n.mount(e),N.set(e,n)}function ke(e,t){return Q(e)||typeof e=="number"||typeof e=="string"&&!B(t)}function Z(e,t,n,a){const r=[];if(ke(e,t))r.push(he(e,B(t)&&t.default||t,n&&(n.default||n)));else{const i=Y(e,t,a),s=i.length;for(let m=0;m<s;m++){const A=i[m],V=A instanceof Element?Be:Pe;N.has(A)||V(A);const M=N.get(A),u={...n};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(m,s)),r.push(...Se(M,{...t,transition:u},{}))}}return r}function ze(e,t,n){const a=[];return Ie(e,t,n,{spring:ve}).forEach(({keyframes:i,transition:s},m)=>{a.push(...Z(m,i,s))}),a}function He(e){return Array.isArray(e)&&e.some(Array.isArray)}function Re(e){function t(n,a,r){let i=[];He(n)?i=ze(n,a,e):i=Z(n,a,r,e);const s=new Ee(i);return e&&e.animations.push(s),s}return t}function Je(){const e=_(()=>({current:null,animations:[]})),t=_(()=>Re(e));return Ve(()=>{e.animations.forEach(n=>n.stop())}),[e,t]}export{Je as u};
